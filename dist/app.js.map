{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dotenv = require(\"dotenv\");\nvar restify = require(\"restify\");\nvar path = require(\"path\");\nvar restify_1 = require(\"restify\");\nvar create_logger_1 = require(\"./common/create-logger\");\nvar init_api_1 = require(\"./api/init-api\");\ndotenv.config();\nvar APP_NAME = process.env.APP_NAME || 'downdog-app';\nvar PORT = process.env.PORT || 3000;\nvar options = { name: APP_NAME };\n// for testing purposes\nvar app = restify_1.createServer(options);\napp.log = create_logger_1.createLogger(APP_NAME);\n//\n// Middleware\n//\napp.use(restify.acceptParser(['application/json'])); // only accept json requests\napp.use(restify.gzipResponse());\napp.use(restify.bodyParser());\nvar throttleOptions = {\n    burst: 100, ip: true, overrides: { '192.168.1.1': { burst: 0, rate: 0 } }, rate: 50\n};\napp.use(restify.throttle(throttleOptions));\napp.use(restify.requestLogger()); // add a req.log entry\napp.get(/\\/?.*/, restify.serveStatic({\n    directory: path.join(__dirname, 'client'),\n    default: 'index.html'\n}));\n//\n// Routes\n//\ninit_api_1.initApi(app);\n// Audit Logging\napp.on('after', restify.auditLogger({ log: create_logger_1.createLogger('downdog-audit') }));\napp.listen(PORT, function () {\n    app.log.info(app.name + \" listening on \" + app.url);\n});\n"],"file":"app.js"}