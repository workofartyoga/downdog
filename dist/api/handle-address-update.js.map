{"version":3,"names":[],"mappings":"","sources":["api/handle-address-update.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _ = require(\"lodash\");\nvar postal_address_1 = require(\"../shared/postal-address\");\nvar handle_success_1 = require(\"./handle-success\");\nvar handle_error_1 = require(\"./handle-error\");\nvar query_address_update_1 = require(\"../query/query-address-update\");\nfunction handleAddressUpdate(req, res, next) {\n    var errMsg = 'Could not update address';\n    try {\n        //\n        // Check to make sure client is sending the same ID\n        // and that the ID is valid\n        //\n        var address_id = parseInt(req.params.id, 10);\n        var address = postal_address_1.createAddress(req.body);\n        if (address_id !== address.id) {\n            handle_error_1.handleError(req, res, next, 'ERR-013', errMsg, null);\n        }\n        if (typeof address.id === 'undefined' || address.id === -1) {\n            handle_error_1.handleError(req, res, next, 'ERR-014', errMsg, null);\n        }\n        return query_address_update_1.queryAddressUpdate(address)\n            .then(_.partial(handle_success_1.handleSuccess, res, next))\n            .catch(function (err) { return handle_error_1.handleError(req, res, next, 'ERR-015', errMsg, err); });\n    }\n    catch (err) {\n        handle_error_1.handleError(req, res, next, 'ERR-016', errMsg, err);\n    }\n}\nexports.handleAddressUpdate = handleAddressUpdate;\n"],"file":"handle-address-update.js"}